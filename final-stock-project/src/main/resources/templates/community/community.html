<!DOCTYPE html>
<html 
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/layout.html}">
<head>
<meta charset="UTF-8">
<title>커뮤니티</title>
</head>
<body>
<main layout:fragment="content">
<th:block layout:fragment="css">
    <link rel="stylesheet" th:href="@{/css/community.css}" >
</th:block>
  <div th:replace="~{layout/stocksHeader.html}"></div>

  <!-- 댓글 및 인기 주식 섹션을 감싸는 div 추가 -->
  <div class="comment-popular-wrapper">
    <div class="comment-section">
     <form action="/submitComment" method="post">
      <h2 th:text="${stock.st_name} + ' 커뮤니티' "></h2>
      <div class="comment-editor">
        <div class="textarea-container">
          <textarea id="comment" rows="4" placeholder="로그인 이후 댓글을 입력하세요"></textarea>
        </div>
      </div>
		<div class="comment-footer">
		    <div class="comment-button-right">
 				<button type="submit" class="comment-button">
                    <i class='bx bx-comment' aria-label="댓글 남기기"></i> <!-- 댓글 남기기 아이콘 -->
                </button>
		   </div>		   		   
		   </div>
		 </form>
		   <div class="commetdivider"></div> <!-- 줄 추가 -->
		   
					<ul id="commentList">
					  <li class="comment">
					    <div class="comment-header">
					      <address class="comment-author">
					        <span class="author-name">mb_id</span>
					        <span class="author-badge">mb_lever</span>      
					      </address>
					       <button class="follow-btn">팔로우</button>
					    </div>
					    <div class="comment-body">
					      <p class="comment-text">
					        본문글 가져오기
					      </p>
					    </div>
					    <div class="comment-footer">
					      <button class="like-btn">
					      	<i class='bx bxs-heart'></i>
					      	<span style="font-size: 13px">13</span>
					</button>
					<button class="reply-btn" onclick="toggleInput()">
					<i class='bx bx-comment' aria-label="댓글 남기기"></i> <!-- 댓글 남기기 아이콘 -->
					</button>
					<button class="report-btn">
						 <i class='bx bx-x-circle' aria-label="신고하기"></i> <!-- 신고하기 -->
					<span style="font-size: 13px">wr_singo</span>
					  </button>
					</div>
					<!-- 댓글 입력창 -->
					<div class="reply-input" style="display: none;">			       	
					<form action="/saveComment" method="post"> <!-- 댓글 저장을 위한 폼 -->
					<div class="commetdivider"></div> <!-- 줄 추가 -->
					   <textarea name="commentText" rows="2" placeholder="댓글을 입력하세요" required></textarea>
					   <input type="hidden" name="parentCommentId" th:value="${wr_no}"/> 
					   <button type="submit" class="submit-reply">
					   	<i class='bx bx-comment' aria-label="댓글 남기기"></i> <!-- 댓글 남기기 아이콘 -->
					            </button>
					        </form>
					     </div>
					</li>
					<li class="minecomment" style="display: none;">
						<div class="comment-header">
						    <address class="comment-author">
						        <span class="author-name">mb_id</span>
						        <span class="author-badge">mb_lever</span>
						    </address>
						</div>
						<div class="comment-body">
						    <p class="comment-text">첫 번째 댓글 내용입니다.</p>
						</div>
						<div class="comment-footer">
						    <button class="like-btn">
						        <i class='bx bxs-heart'></i>
						        <span style="font-size: 13px">0</span>
						    </button>
						</div>
					</li>
					<li class="minecomment" style="display: none;">
						<div class="comment-header">
						    <address class="comment-author">
						        <span class="author-name">mb_id</span>
						        <span class="author-badge">mb_lever</span>
						    </address>
						</div>
						<div class="comment-body">
						    <p class="comment-text">첫 번째 댓글 내용입니다.</p>
						</div>
						<div class="comment-footer">
						    <button class="like-btn">
						        <i class='bx bxs-heart'></i>
						        <span style="font-size: 13px">0</span>
						    </button>
						</div>
					</li>
				  <!-- 추가 댓글 -->
				</ul>
    </div>
    <div class="popular-stocks">
	    <h2>인기 급상승 주식</h2>
	    <ul class="stock-list">
	        <li class="stockItem">
	            <h3>카카오</h3>
	            <p>67,800원</p>
	        </li>
	    </ul>
    </div>
  </div>
  <script type="text/javascript">
 /* function toggleInput(button) {
	    const commentItem = button.closest('.comment'); // 현재 댓글 항목 선택
	    const replyInput = commentItem.querySelector('.reply-input'); // 댓글 입력란 선택
	    const mineComment = commentItem.nextElementSibling; // 다음 요소인 minecomment 선택

	    // 댓글 입력창 토글
	    if (replyInput.style.display === 'none' || replyInput.style.display === '') {
	        replyInput.style.display = 'block'; // 댓글 입력 창 표시
	        if (mineComment) {
	            mineComment.style.display = 'block'; // minecomment 표시
	        }
	    } else {
	        replyInput.style.display = 'none'; // 댓글 입력 창 숨기기
	        if (mineComment) {
	            mineComment.style.display = 'none'; // minecomment 숨기기
	        }
	    }
	}*/
  function toggleInput(){
		if($('.minecomment').css('display') == 'none'){
			$('.minecomment').css('display', '');
			$('.reply-input').css('display', 'block');
		} else {
			$('.minecomment').css('display', 'none');
			$('.reply-input').css('display', 'none');
		}
	} 
</script>
</main>

</body>
</html>
